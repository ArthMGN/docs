---
title: "Entrada de Estoque"
description: "https://utilities.mgnsystem.cloud/ag-control/v1/entrada"
---

## **Visão Geral**

Registra movimentações de **entrada de estoque**, integrando dados de NF-e e armazenagem no sistema **MGN SYSTEM - AG CONTROL**.

Essa API é normalmente utilizada por sistemas externos como o **ERP**, que envia os dados da nota fiscal eletrônica e dos itens armazenados para controle logístico.

Método HTTP: POST `/v1/entrada`

## Headers

| Nome          | Valor              |
| :------------ | :----------------- |
| Content-Type  | `application/json` |
| Authorization | `Bearer <token>`   |

## Campos

### Emitente

| **Nome**               | **Tipo** | **Descrição**                          |
| :--------------------- | :------- | :------------------------------------- |
| `nome`                 | string   | Nome ou razão social do destinatário   |
| `documento`            | string   | CNPJ ou CPF do destinatário            |
| `tipo_parceiro`        | string   | `CLIENTE` ou `EMPRESA`                 |
| `email`                | string   | E-mail da unidade ou contato logístico |
| `endereco.logradouro`  | string   | Nome da rua / avenida                  |
| `endereco.numero`      | string   | Número do endereço                     |
| `endereco.complemento` | string   | Complemento (opcional)                 |
| `endereco.bairro`      | string   | Bairro                                 |
| `endereco.cep`         | string   | CEP no formato 00000-000               |
| `endereco.cidade`      | string   | Cidade                                 |
| `endereco.uf`          | string   | UF (sigla do estado)                   |
| `endereco.pais`        | string   | País                                   |
| `endereco.latitude`    | string   | Latitude geográfica                    |
| `endereco.longitude`   | string   | Longitude geográfica                   |

### Destinatário

| **Nome**               | **Tipo** | **Descrição**                          |
| :--------------------- | :------- | :------------------------------------- |
| `nome`                 | string   | Nome ou razão social do destinatário   |
| `documento`            | string   | CNPJ ou CPF do destinatário            |
| `tipo_parceiro`        | string   | `CLIENTE` ou `EMPRESA`                 |
| `email`                | string   | E-mail da unidade ou contato logístico |
| `endereco.logradouro`  | string   | Nome da rua / avenida                  |
| `endereco.numero`      | string   | Número do endereço                     |
| `endereco.complemento` | string   | Complemento (opcional)                 |
| `endereco.bairro`      | string   | Bairro                                 |
| `endereco.cep`         | string   | CEP no formato 00000-000               |
| `endereco.cidade`      | string   | Cidade                                 |
| `endereco.uf`          | string   | UF (sigla do estado)                   |
| `endereco.pais`        | string   | País                                   |
| `endereco.latitude`    | string   | Latitude geográfica                    |
| `endereco.longitude`   | string   | Longitude geográfica                   |

### Embarque

| **Nome**            | **Tipo**            | **Descrição**                                |
| :------------------ | :------------------ | :------------------------------------------- |
| `armazem_documento` | string              | CNPJ do armazém responsável pelo recebimento |
| `nf_entrada`        | string              | Número da Nota Fiscal de Entrada             |
| `data_emissao`      | string (YYYY-MM-DD) | Data de emissão da nota fiscal               |
| `itens`             | array de objetos    | Lista de itens recebidos                     |

### Embarque (array dentro de \*\*`embarque.itens`)

| Nome              | Tipo                | Descrição                         |
| :---------------- | :------------------ | :-------------------------------- |
| `codigo`          | string              | Código do produto                 |
| `descricao`       | string              | Descrição do produto              |
| `unidade`         | string              | Unidade de medida (ex: KG, L, CX) |
| `quantidade`      | number              | Quantidade recebida               |
| `lote`            | string              | Código do lote                    |
| `data_fabricacao` | string (YYYY-MM-DD) | Data de fabricação                |
| `data_vencimento` | string (YYYY-MM-DD) | Data de vencimento                |
| `valor_unitario`  | number              | Valor unitário do produto         |

## **Exemplo**

<RequestExample>

```json body
[
	{
		"emitente": {
			"nome": "EMPRESA EMITENTE LTDA",
			"documento": "02.123.456/0001-01",
			"tipo_parceiro": "EMPRESA",
			"endereco": {
				"logradouro": "Avenida 31 de Março",
				"numero": "2500",
				"complemento": "",
				"bairro": "Centro",
				"cep": "14870-000",
				"cidade": "Jaboticabal",
				"uf": "SP",
				"pais": "BRASIL",
				"latitude": "-21.2587",
				"longitude": "-48.3245"
			},
			"email": "contato.jb@empresaemitente.com.br"
		},
		"destinatario": {
			"nome": "SUPERMERCADO CIDADE NOVA",
			"documento": "03.001.234/0001-00",
			"tipo_parceiro": "CLIENTE",
			"endereco": {
				"logradouro": "Rua do Comércio",
				"numero": "500",
				"complemento": "Loja 01",
				"bairro": "Vila Nova",
				"cep": "13000-000",
				"cidade": "Campinas",
				"uf": "SP",
				"pais": "BRASIL",
				"latitude": "-22.9056",
				"longitude": "-47.0608"
			},
			"email": "cidadenova@supermercado.com.br",
			"prazo_armazenagem": 30,
			"contrato": "C-2025-001"
		},
		"embarque": {
			"armazem_documento": "10.000.000/0001-10",
			"nf_entrada": "500123",
			"data_emissao": "2025-07-20",
			"itens": [
				{
					"codigo": "1234567890123",
					"descricao": "FERTILIZANTE NPK 20-20-20 50KG",
					"unidade": "KG",
					"quantidade": 1500,
					"lote": "LOTE-A-100",
					"data_fabricacao": "2025-06-01",
					"data_vencimento": "2026-06-01",
					"valor_unitario": 2.50
				}
			]
		}
	}
]
```

</RequestExample>

<ResponseExample>

```json 200
{
	"status": "ok",
	"mensagem": "Entradas processadas com sucesso"
}
```

</ResponseExample>

## Erros comuns

| **Código** | **Mensagem**                                        | **Causa Provável**                      |
| :--------- | :-------------------------------------------------- | :-------------------------------------- |
| 400        | Campos obrigatórios ausentes                        | Campo como `nf_entrada` ou `itens` nulo |
| 403        | Usuário sem vínculo com a empresa                   | Token não corresponde à empresa enviada |
| 422        | Documento do destinatário inválido ou mal formatado | CPF/CNPJ incorreto                      |
| 500        | Erro interno ao processar entrada                   | Dados inconsistentes ou duplicados      |

<Note>
  - A movimentação registrada tem tipo_movimentacao = 'ENTRADA'.
  - Se o produto, armazém ou parceiro ainda não existir, será criado automaticamente vinculado à empresa.
  - A função respeita as **RLS policies** para garantir que o usuário só altere dados da empresa à qual está vinculado.
</Note>