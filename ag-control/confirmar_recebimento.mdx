---
title: "Confirmação de Recebimento"
description: "https://utilities.mgnsystem.cloud/ag-control/v1/confirmar_recebimento"
---

## Visão Geral

Confirma a entrada física dos materiais no armazém geral, validando os dados da nota fiscal e registrando a movimentação de estoque no sistema **MGN SYSTEM - AG CONTROL**.

Essa API é utilizada após o recebimento físico dos produtos no AG, normalmente via integração automática ou processo interno do WMS. A confirmação é feita por item e por lote, associando o número da nota fiscal do cliente e a nota fiscal do armazém (NF-AG).

Método HTTP:  POST `/v1/confirmar_recebimento`

## **Headers**

| **Nome**      | **Valor**          |
| :------------ | :----------------- |
| Content-Type  | `application/json` |
| Authorization | `Bearer <token>`   |

## Campos

| **Nome**            | **Tipo** | **Descrição**                                                           |
| :------------------ | :------- | :---------------------------------------------------------------------- |
| `armazem_documento` | string   | CNPJ do armazém geral responsável pelo recebimento                      |
| `codigo`            | string   | Código do produto conforme cadastro na base da empresa                  |
| `lote`              | string   | Lote do produto a ser confirmado                                        |
| `nf_entrada`        | string   | Número da nota fiscal de entrada do cliente (empresa contratante do AG) |
| `nf_ag`             | string   | Número da nota fiscal emitida pelo armazém geral (prestação de serviço) |
| `data_entrada`      | string   | Data efetiva do recebimento físico no armazém (formato: YYYY-MM-DD)     |

## **Exemplo**

<RequestExample>

```json body
[
  {
    "armazem_documento": "00163083000130",
    "codigo": "5001007003456",
    "lote": "LT-6286",
    "nf_entrada": "266549",
    "nf_ag": "8335",
    "data_entrada": "2025-07-24"
  }
]
```

</RequestExample>

<RequestExample>

```json 200
{
	"mensagem": "Entradas confirmadas com sucesso"
}
```

</RequestExample>

## Erros comuns

| **Código** | **Mensagem**                  | **Causa Provável**                                              |
| :--------- | :---------------------------- | :-------------------------------------------------------------- |
| 400        | Campos obrigatórios ausentes  | Campos como `nf_entrada`, `lote` ou `armazem_documento` ausente |
| 403        | Usuário sem acesso ao armazém | Políticas RLS impedem a operação                                |
| 404        | Movimentação não encontrada   | Não existe entrada para os dados informados                     |
| 409        | Movimentação já confirmada    | Já existe confirmação para esse item/lote                       |
| 500        | Erro interno                  | Erro de banco, RLS ou inconsistência de dados                   |

<Note>
  - A confirmação será realizada apenas se a movimentação original de ENTRADA já estiver registrada para o mesmo produto, lote, nf_entrada, empresa e armazem.
  - A nf_ag e a data_entrada serão associadas ao registro original.
</Note>