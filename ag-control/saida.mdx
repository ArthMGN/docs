---
title: "Saida de Estoque"
description: "https://utilities.mgnsystem.cloud/ag-control/v1/saida"
---

## **Visão Geral**

Registra movimentações de saída de estoque no sistema **MGN SYSTEM - AG CONTROL**, com base na baixa dos itens armazenados em armazéns gerais (AGs). Essa API é utilizada quando o material deixa fisicamente o AG, seja por expedição, transferência, devolução, consumo ou outro motivo logístico.

Método HTTP: POST `/v1/saida`

## Headers

| **Nome**      | **Valor**          |
| :------------ | :----------------- |
| Content-Type  | `application/json` |
| Authorization | `Bearer <token>`   |

## Campos

| **Nome**            | **Tipo** | **Descrição**                                                     |
| :------------------ | :------- | :---------------------------------------------------------------- |
| `codigo`            | string   | Código do produto conforme cadastro na empresa                    |
| `lote`              | string   | Lote do produto a ser baixado                                     |
| `quantidade`        | string   | Quantidade a ser baixada do estoque (pode ser parcial ou total)   |
| `nf_saida`          | string   | Número da nota fiscal de saída vinculada à operação logística     |
| `nf_ag`             | string   | Número da nota fiscal emitida pelo armazém (prestação de serviço) |
| `data_saida`        | string   | Data da saída física do material do armazém (formato: YYYY-MM-DD) |
| `armazem_documento` | string   | CNPJ do armazém responsável pela armazenagem e expedição          |
| `obs`               | string   | Observações adicionais sobre a operação de saída (opcional)       |

## **Exemplo**

<RequestExample>

```json body
[
  {
    "codigo": "4001005001234",
    "lote": "LT-9421",
    "nf_ag": "9586",
    "quantidade": 206,
    "nf_saida": "556680",
    "data_saida": "2025-07-25",
    "armazem_documento": "00163083000130",
    "obs": "Saída parcial para devolução"
  }
]
```

</RequestExample>

<ResponseExample>

```json 200
{
	"mensagem": "Saídas confirmadas com sucesso"
}
```

</ResponseExample>

## Erros comuns

| **Código** | **Mensagem**                          | **Causa Provável**                                   |
| :--------- | :------------------------------------ | :--------------------------------------------------- |
| 400        | Campos obrigatórios ausentes          | Falta de `lote`, `codigo` ou `nf_entrada`            |
| 403        | Usuário sem acesso ao armazém         | Sem vínculo com empresa ou armazém                   |
| 404        | Entrada correspondente não encontrada | Lote ou NF de entrada inválidos                      |
| 409        | Quantidade excede o saldo disponível  | Tentativa de saída maior do que a entrada confirmada |
| 500        | Erro interno                          | Violação de política RLS, chave duplicada etc        |

<Note>
  - A API busca automaticamente a movimentação de ENTRADA correspondente ao produto, lote, empresa, armazem e nf_entrada, e aplica a saída com o saldo disponível.
  - O campo obs pode ser utilizado para indicar o motivo da baixa (ex: devolução, consumo, transferência).
  - Se a quantidade informada exceder o saldo disponível, o sistema retornará erro de saldo insuficiente.
</Note>